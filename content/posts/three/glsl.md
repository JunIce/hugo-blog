---
title: "着色器"
date: 2024-04-28T21:32:35+08:00
tags: ["threejs", "glsl"]
categories: ["GLSL"]
draft: false
---

# 着色器



顶点着色器（Vertex Shader）和片段着色器（Fragment Shader）是现代图形渲染管线中的关键组成部分，尤其是在OpenGL、DirectX等图形API中广泛使用。它们是两种不同类型的着色器，各自承担不同的任务，并在图形硬件（GPU）上并行执行以加速渲染过程。

顶点着色器（Vertex Shader）： 顶点着色器是在图形渲染管线的早期阶段执行的，它主要负责处理图形中的单个顶点数据。当你有一个3D模型时，模型是由大量的顶点构成的，每个顶点都有自己的位置、颜色、法线和其他属性。顶点着色器的主要功能包括：

变换（Transformations）：顶点着色器能够对每个顶点进行变换，如平移、旋转、缩放，也可以应用更复杂的数学变换，如模型视图矩阵变换、透视除法等，以将模型从局部空间转换到世界空间，再转换到相机空间（视口空间）。

属性计算：它可以计算顶点的额外属性，比如光照影响下的顶点颜色、法线贴图的空间变换等。

输出定制：顶点着色器可以修改和输出顶点数据，这些数据将被后续管线阶段使用，包括用于生成新的顶点位置（gl_Position），或者传递给片段着色器的自定义varying变量。

片段着色器（Fragment Shader）： 片段着色器则是在渲染管线的后期阶段执行，它的主要工作是对每个像素或者说“片段”进行着色处理。片段是由光栅化阶段生成的，对应屏幕上的一个个像素区域。片段着色器的任务主要包括：

插值（Interpolation）：片段着色器得到的是经过顶点着色器处理后插值得到的属性值，如顶点颜色、纹理坐标等，这些值会在三角形内部的像素间进行线性或更高阶插值。

颜色计算：片段着色器最重要的功能是计算最终像素的颜色，这通常涉及到纹理采样、光照计算、雾效、透明度混合等各种复杂操作。

输出帧缓冲（Framebuffer）：片段着色器的输出结果会被写入帧缓冲区，也就是屏幕上的像素颜色。

总的来说，顶点着色器用于几何形状的变换与属性调整，而片段着色器负责确定每个像素最终显示的颜色。这两者共同构成了图形管线中的可编程部分，极大地增强了开发者对渲染效果的控制力和灵活性。